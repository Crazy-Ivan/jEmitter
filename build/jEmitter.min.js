/*! jEmitter - v0.1.0 - 2013-09-15
* Copyright (c) 2013 Paweł Bród; Licensed  */
var jEmitter=jEmitter||{};!function(a){"use strict";a.Particle=function(b,c,d,e,f){return this instanceof a.Particle?(this.init(b,c,d,e,f),void 0):new a.Particle(b,c,d,e,f)},a.Particle.prototype.init=function(b,c,d,e,f){this.position?(this.position.x=b,this.position.y=c,this.velocity.x=d,this.velocity.y=e):(this.position=new a.Vector(b,c),this.velocity=new a.Vector(d,e)),this.size=f.size||15,this.sizeStep=f.sizeStep||0,this.gravity=f.gravity||0,this.wind=f.wind||0,this.color=f.color||"#000000",this.alpha=f.alpha||1,this.fadeStep=f.fadeStep||0,this.rotateStep=f.rotateStep||0,this.rotateAngle=0,this.alive=!0},a.Particle.prototype.move=function(){this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.velocity.x+=this.wind,this.velocity.y+=this.gravity,this.alpha-=this.fadeStep,this.size+=this.sizeStep,this.rotateAngle+=this.rotateStep,(this.size<1||this.alpha<.1)&&(this.alive=!1)}}(jEmitter);var jEmitter=jEmitter||{};!function(a){"use strict";a.ParticleEmitter=function(b){return this instanceof a.ParticleEmitter?(b=b||{},this.particles=[],this.pool=[],this.poolSize=b.poolSize||250,this.maxParticleEmit=b.maxParticleEmit||4,this.minParticleEmit=b.minParticleEmit||1,this.maxSize=b.maxSize||1,this.minSize=b.minSize||5,this.maxSizeStep=b.maxSizeStep||0,this.minSizeStep=b.minSizeStep||0,this.maxGravity=b.maxGravity||0,this.minGravity=b.minGravity||0,this.maxWind=b.maxWind||0,this.minWind=b.minWind||0,this.spreadX=b.spreadX||0,this.spreadY=b.spreadY||0,this.minVelocity=b.minVelocity||3,this.maxVelocity=b.maxVelocity||5,this.minVelocityRadius=b.minVelocityRadius||0,this.maxVelocityRadius=b.maxVelocityRadius||360,this.equalRadius=b.equalRadius||!1,this.minRotateStep=b.minRotateStep||0,this.maxRotateStep=b.maxRotateStep||0,this.colors=b.colors||["#69D2E7","#A7DBD8","#E0E4CC","#F38630","#FA6900","#FF4E50","#F9D423"],this.minAlpha=b.minAlpha||100,this.maxAlpha=b.maxAlpha||100,this.minFadeStep=b.minFadeStep||0,this.maxFadeStep=b.maxFadeStep||0,this.image=b.image,this.TWO_PI=2*Math.PI,this.RAD_CONS=Math.PI/180,void 0):new a.ParticleEmitter(b)},a.ParticleEmitter.prototype.emit=function(b,c){for(var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=a.utils.random,u=t(this.minParticleEmit,this.maxParticleEmit),v=0;u>v;v++)e=t(this.minSize,this.maxSize),f=t(this.minSizeStep,this.maxSizeStep)/100,g=t(this.minGravity,this.maxGravity)/100,h=t(this.minWind,this.maxWind)/100,i=t(b-this.spreadX,b+this.spreadX),j=t(c-this.spreadY,c+this.spreadY),k=this.colors[Math.floor(Math.random()*this.colors.length)],l=t(this.minAlpha,this.maxAlpha)/100,m=t(this.minFadeStep,this.maxFadeStep)/100,n=t(this.minRotateStep,this.maxRotateStep),o=t(this.minVelocity,this.maxVelocity),this.equalRadius?(p=this.minVelocityRadius+(this.maxVelocityRadius-this.minVelocityRadius)/u*v,console.log(u,p)):p=t(this.minVelocityRadius,this.maxVelocityRadius),q=(p+90)*this.RAD_CONS,r=Math.sin(q)*o,s=Math.cos(q)*o,this.particles.length>=this.poolSize&&this.pool.push(this.particles.shift()),this.pool.length?(d=this.pool.pop(),d.init(i,j,r,s,{size:e,sizeStep:f,gravity:g,wind:h,color:k,alpha:l,fadeStep:m,rotateStep:n})):d=new a.Particle(i,j,r,s,{size:e,sizeStep:f,gravity:g,wind:h,color:k,alpha:l,fadeStep:m,rotateStep:n}),this.particles.push(d)},a.ParticleEmitter.prototype.update=function(){for(var a=this.particles.length-1;a>=0;a--)this.particles[a].alive?this.particles[a].move():this.pool.push(this.particles.splice(a,1)[0])},a.ParticleEmitter.prototype.draw=function(a,b){var c=this.particles[b],d=c.size/2;a.save(),a.globalAlpha=c.alpha,a.translate(c.position.x,c.position.y),a.rotate(c.rotateAngle*this.RAD_CONS),this.image?a.drawImage(this.image,-d,-d,c.size,c.size):(a.beginPath(),a.arc(-d,-d,c.size,0,this.TWO_PI),a.fillStyle=c.color,a.fill()),a.restore()},a.ParticleEmitter.prototype.render=function(a){this.update();for(var b=this.particles.length-1;b>-1;b--)this.draw(a,b)}}(jEmitter);var jEmitter=jEmitter||{};!function(a){"use strict";a.utils={random:function(a,b){return Math.floor(Math.random()*(b-a+1))+a},hexToRgb:function(a){var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return b?{r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)}:null}}}(jEmitter);var jEmitter=jEmitter||{};!function(a){"use strict";a.Vector=function(a,b){this.x=a||0,this.y=b||0}}(jEmitter);